import Head from "next/head";
import { useRouter } from "next/router";
import PageFornat from "../../Components/Common/PageFormat/PageFormat";
import PostPage from "../../Components/Pages/Post/PostPage";
import {collection, getDocs} from 'firebase/firestore'
import {db} from '../../firebase/firebase'

const PostOuter = ({postData}) => {
    const router = useRouter()
    const postID = router.query.postID
    return (
        <>
            <Head>
                <title>Post | {postID}</title>
                <meta name="description" content="Generated by create next app" />
                <meta name="viewport" content="width=device-width, initial-scale=1" />
                <link rel="icon" href="/favicon.ico" />
             </Head>
             <PageFornat>
                <PostPage postData={postData}/>
             </PageFornat>
        </>
    );
}

export async function getServerSideProps() {
  const res = await fetch('https://catfact.ninja/fact')
  const postData = await res.json()
  const collectionRef = collection(db, 'postData')
  getDocs(collectionRef)
  .then(res=>{
    const postData = res.docs.map(doc => ({
      data: doc.data(),
      id: doc.id
    }))
    console.log(test)
  })
  return {
    props: {
      postData,
    },
  }
}
  
export default PostOuter;